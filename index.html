<!DOCTYPE html>
<html lang="bs">
  <head>
    <meta charset="UTF-8" />
    <title>Test PoziviAjax</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 40px;
      }
      input,
      button {
        padding: 8px;
        font-size: 16px;
        margin: 5px 0;
      }
      button {
        cursor: pointer;
      }
      pre {
        background: #f4f4f4;
        padding: 10px;
        margin-top: 10px;
        white-space: pre-wrap;
      }
    </style>
  </head>
  <body>
    <h1>Test PoziviAjax</h1>

    <h2>Kreiraj scenarij</h2>
    <input type="text" id="titleInput" placeholder="Unesi naslov scenarija" />
    <button onclick="kreirajScenario()">Kreiraj scenarij</button>
    <pre id="postResult">Nema rezultata</pre>

    <h2>Zaključaj liniju</h2>
    <input type="number" id="scenarioIdInput" placeholder="Scenario ID" />
    <input type="number" id="lineIdInput" placeholder="Line ID" />
    <input type="number" id="userIdInput" placeholder="User ID" />
    <button onclick="zakljucajLiniju()">Zaključaj liniju</button>
    <pre id="lockResult">Nema rezultata</pre>

    <!-- Učitaj PoziviAjax modul -->
    <script src="PoziviAjax.js"></script>

    <script>
      // Kreiranje scenarija
      function kreirajScenario() {
        const title = document.getElementById("titleInput").value;

        PoziviAjax.postScenario(title, function (status, data) {
          const output = document.getElementById("postResult");
          if (status === 201) {
            output.textContent =
              "Scenarij kreiran:\n" + JSON.stringify(data, null, 2);
          } else {
            output.textContent =
              "Greška: " + status + "\n" + JSON.stringify(data, null, 2);
          }
        });
      }

      // Zaključavanje linije
      function zakljucajLiniju() {
        const scenarioId = Number(
          document.getElementById("scenarioIdInput").value
        );
        const lineId = Number(document.getElementById("lineIdInput").value);
        const userId = Number(document.getElementById("userIdInput").value);

        PoziviAjax.lockLine(
          scenarioId,
          lineId,
          userId,
          function (status, data) {
            const output = document.getElementById("lockResult");
            if (status === 200) {
              output.textContent =
                "Linija zaključana:\n" + JSON.stringify(data, null, 2);
            } else {
              output.textContent =
                "Greška (" + status + "):\n" + JSON.stringify(data, null, 2);
            }
          }
        );
      }
    </script>
  </body>
</html>
